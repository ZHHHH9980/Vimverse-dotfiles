# Using Hammerspoon and locatorjs to Jump from Web Applications to Neovim on macOS

## Background

In web development, we often need to switch frequently between web applications and code editors. For example, we may preview a web page in a browser, find an issue, and then need to locate the corresponding code in the code editor to make changes. This switching between different applications can reduce our work efficiency.

To solve this problem, we can use locatorjs to generate a special URL in the web application, containing information about the file path, line number, and column number. Then, we can set up a custom URL protocol (e.g., hammerspoon://) and configure Hammerspoon to listen for this protocol. When we click on the link generated by locatorjs in the web application, Hammerspoon can intercept this event, extract the file path, line number, and column number from the URL, and then open the corresponding file in our preferred code editor (such as Neovim) and jump to the specified location.

This way, we can achieve seamless jumping from the web application to the code editor, greatly improving our work efficiency.

## Implementation Strategy
1. In the web application, use locatorjs to generate a special URL containing the file path, line number, and column number information. For example:

```
hammerspoon://openFile?path=${filePath}&line=${line}&column=${column}
```

2. On macOS, install and configure Hammerspoon.
3. In the Hammerspoon configuration file (init.lua), set up a URL event listener to listen for the openFile event.
4. When the link generated by locatorjs is clicked in the web application, Hammerspoon will intercept the openFile event and extract the file path, line number, and column number from the URL parameters.
5. Hammerspoon uses the extracted information to construct a shell command for opening Neovim in iTerm2 and jumping to the specified file, line, and column. For example:
```
/opt/homebrew/bin/nvim /path/to/file.txt +'execute "normal! 10G5|"'
```
This command will open /path/to/file.txt and jump to line 10, column 5.

6. Hammerspoon writes the constructed command to a temporary bash script file.
7. Hammerspoon uses AppleScript to create a new tab in iTerm2 and execute the temporary bash script file in the new tab, thus opening the file in Neovim and jumping to the specified location.
8. After the AppleScript execution is completed, Hammerspoon will delete the temporary bash script file.

## Configuration Steps

1. Install Hammerspoon (if you haven't already).
2. Add the above Lua script to ~/.hammerspoon/init.lua.
3. Reload the Hammerspoon configuration (you can find the "Reload Config" option in the Hammerspoon menu).
4. In the web application, use locatorjs to generate hammerspoon:// links.
5. Click on the link and enjoy the convenience of automatic jumping in Neovim!

With the above configuration, we can achieve seamless jumping from the web application to Neovim, improving our development efficiency. This integration approach showcases the power and flexibility of Hammerspoon, allowing us to customize and optimize our workflow according to our needs.
